<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <script type="module" src="../index.js"></script> -->
    <script type="module" src="./cal1.js"></script>
    <!-- <script type="module" src="./cal2.js"></script> -->
    <script type="module" src="./script.js"></script>
    <script type="module" src="./firebase.js"></script>
    <link rel="stylesheet" href="./calculate.css">
    <!-- <script type="module" src="./cal2.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>計算健康</title>
</head>
<body>
    <section>
        <h2>基本資料</h2>
        <form id="bmiForm">
            <label for="height" id="lab">性別:</label>
            <input type="radio"  id="male">男
            <input type="radio"  id="female">女<br>
            <label for="age" id="lab">年齡:</label>
            <input type="number" id="age" name="age" required> <br>
            <label for="height" id="lab">身高 (cm):</label>
            <input type="number" id="height" name="height" required> <br>
            <label for="weight" id="lab">體重 (kg):</label>
            <input type="number" id="weight" name="weight" required> <br>
            <button type="submit">計算</button>
        </form>
        <div id="bmiOutput"></div>
        <hr>
        <button id="Insbtn">INSERT</button>
        <button id="Selbtn">SELECT</button>
        <button id="Updbtn">UPDATE</button>
        <button id="Delbtn">DELETE</button>
        <!-- ----------導入+配置---------- -->
        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
            import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-analytics.js";
            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries
          
            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
              apiKey: "AIzaSyDzZVKeHHLGIdgrYz7Np3XHEPsk7FbhLIE",
              authDomain: "healthy-food-938d3.firebaseapp.com",
              projectId: "healthy-food-938d3",
              storageBucket: "healthy-food-938d3.appspot.com",
              messagingSenderId: "88881865492",
              appId: "1:88881865492:web:0957c85928202e9c8d9801",
              measurementId: "G-YJ7VXRSBK8"
            };
          
            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const analytics = getAnalytics(app);

            import {getDatabase,ref,set,child,update,remove}
            from "https://www.gstatic.com/firebasejs/9.1.3/firebase-database.js";

            const db = getDatabase();

            // 參考
            var namebox = document.getElementById("NameBox");
            var rollbox = document.getElementById("RollBox");
            var secbox = document.getElementById("SecBox");
            var genbox = document.getElementById("GenBox");

            var insBtn = document.getElementById("Insbtn");
            var selBtn = document.getElementById("Selbtn");
            var updBtn = document.getElementById("Updbtn");
            var delBtn = document.getElementById("Delbtn");

            // 插入資料功能

            function insertData(){
                set(ref(db, 'TheStudents/' + rollbox.value), {//設定資料
                    NameOfStd:namebox.value,
                    RollNo:rollbox.value,
                    Section:secbox.value,
                    GenderL:genbox.value
                })
                .then(() => {
                    alert("Data Inserted Successfully");
                })
                .catch((error) => {
                    alert("Data Insertion Failed" + error);
                });
            }
                
            //將事件分配給 btns
            insBtn.addEventListener("click",insertData);
          </script>
    </section>

    <section>
    <!-- 讓用戶輸入每日卡路里的表單 -->
    <form id="calorieForm">   
        <label for="calories">輸入今日卡路里攝取量:</label> 
        <input type="number" id="calories" name="calories" required>
        <button type="submit">提交</button>
    </form>
    <div id="calorieOutput"></div>  <!-- 顯示用戶輸入的卡路里 -->

   <!-- 顯示圖表 -->
    <div id="tChart">
        <canvas id="calorieChart"></canvas>    
    </div>
    <button id="clearData">Clear</button>
    
</section>


<!-- <section>
    <h2>Survey Data</h2>
    <select id="userSelect"></select>
    <div id="userInfo"></div>
    <button id="clearData">清除資料</button>
</section> -->

      
<!-- <h1>Survey Data</h1>
<select id="userSelect"></select>
<div id="userInfo"></div>
  
<script>
    // 讀取 JSON 資料
    fetch('./data.json')
        .then(response => response.json())
        .then(data => {
            const userSelect = document.getElementById('userSelect');
            const userInfo = document.getElementById('userInfo');

            data.forEach(user => {
                const option = document.createElement('option');
                option.value = user.name; // 根據 CSV 檔中的相應字段
                option.textContent = user.name;
                userSelect.appendChild(option);
            });

            userSelect.addEventListener('change', function() {
                const selectedUser = data.find(user => user.name === this.value);
                if (selectedUser) {
                    userInfo.innerHTML = `
                        <p>Name: ${selectedUser.name}</p>
                        <p>Age: ${selectedUser.age}</p>
                        <p>Gender: ${selectedUser.gender}</p>
                        <p>Height: ${selectedUser.height}</p>
                        <p>Weight: ${selectedUser.weight}</p>
                    `;
                } else {
                    userInfo.innerHTML = '';
                }
            });
        })
        .catch(error => console.error('Error:', error));
</script> -->

    <!-- 回到頂部按鈕 -->
    <button class="floating-button" onclick="scrollToTop()">回到頂部</button>
    <script src="./cal1.js"></script>
</body>
</html>